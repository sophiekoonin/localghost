<!-- Begin Nav bar -->
    <nav class="navbar" role="navigation" aria-label="main navigation">
        {{ $isHome := .Page.IsHome }}
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <ul class="navbar-menu" id="navMenu">
            <!-- look for custom menu and include it -->
            {{ if .Site.Menus.main }}
            {{ range .Site.Menus.main }}
            {{ if .HasChildren }}
            <li class="navbar-item">
            <a href="{{ .URL }}">
                {{ .Pre }}
                {{ .Name }}
                {{ .Post }}
            </a></li>
            {{ range .Children }}
            <!-- TODO: style children diffrent then parents-->
            <li class="navbar-item">
                <a href="{{ .URL }}">
                    {{ .Pre }}
                    {{ .Name }}
                    {{ .Post }}
                </a></li>
            {{ end }}
            {{ else }}
            <li class="navbar-item">
                <a href="{{ .URL }}">
                    {{ .Pre }}
                    {{ .Name }}
                    {{ .Post }}
                </a></li>
            {{ end }}
            {{ end }}
            {{ else }}
            <!-- use default menu -->
            {{ if not $isHome }}
            <li class="navbar-item"><a href="{{ "/" | relLangURL }}">{{ i18n "nav_main" . }}</a></li>
            {{ end }}

            {{ with .Site.GetPage "/home" }}
            {{ range sort (.Resources.ByType "page") "Params.weight" }}
            {{ if ne .Name "contact.md" }}
            <li class="navbar-item"><a href="{{ if $isHome }}#{{ .File.TranslationBaseName }}{{ else }}{{ printf "/#%s" (.File.TranslationBaseName | urlize) | relLangURL }}{{ end }}">{{ .Title }}</a></li>
            {{ end }}
            {{ end }}
            {{ end }}

            {{ $pageIsInProjects := eq .Page.Section "projects"}}
            {{ if not (and $pageIsInProjects (eq .Page.Kind "section")) }}
            {{ with .Site.GetPage "/projects" }}
            {{ $totalProjects := (len .Pages) }}
            {{ if $isHome }}
            <li class="navbar-item"><a href="{{ printf "#%s" (.Title | urlize) }}">{{ .Title }}</a></li>
            {{ else }}
            <li class="navbar-item"><a href="{{ .Permalink }}">
                {{ if $pageIsInProjects }}
                {{ i18n "nav_backToSection" . }}
                {{ else }}
                {{ .Title }}
                {{ end }}
            </a></li>
            {{ end }}
            {{ end }}
            {{ end }}

            {{ $pageIsInBlog := eq .Page.Section "blog"}}
            {{ if not (and $pageIsInBlog (eq .Page.Kind "section")) }}
            {{ with .Site.GetPage "/blog" }}
            {{ if $isHome }}
            <li class="navbar-item"><a href="{{ printf "#%s" (.Title | urlize) }}">{{ .Title }}</a></li>
            {{ else }}
            <li class="navbar-item"><a href="{{ .Permalink }}">
                {{ if $pageIsInBlog }}
                {{ i18n "nav_backToSection" . }}
                {{ else }}
                {{ .Title | singularize}}
                {{ end }}
            </a></li>
            {{ end }}
            {{ end }}
            {{ end }}

            {{ with .Site.GetPage "/home" }}
            {{ with .Resources.GetMatch "contact.md" }}
            <li class="navbar-item"><a href="{{ if $isHome }}#{{ .File.TranslationBaseName }}{{ else }}{{ printf "/#%s" (.File.TranslationBaseName | urlize) | relLangURL }}{{ end }}">{{ .Title }}</a></li>
            {{ end }}
            {{ end }}


            {{ if and .Site.Params.showRSSButton .Site.RSSLink }}
            <li class="navbar-item"><a href="{{ .Site.RSSLink }}"><i class="fas fa-rss"></i></a></li>
            {{ end }}
            {{ end }}
        </ul>
    </nav>
</div>
<!-- End Nav bar -->
